<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestión de Solicitudes - Auto TEC</title>
     <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- FontAwesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
 
  <!-- Archivo CSS externo -->
    <link rel="stylesheet" th:href="@{/css/gestion_solicitudes.css}">
</head>
</head>
<body>
     <!-- ====== NAVBAR ====== -->
<div th:replace="fragments/headerAdmin :: headerAdmin"></div>


 <!-- Alert Message -->
            <div th:if="${mensaje}" class="alert alert-success">
                <i class="fas fa-check-circle"></i>
                <span th:text="${mensaje}">Mensaje</span>
            </div>

              <!-- Main Section -->
            <div class="section">
                <div class="search-bar">
                    <input type="text" id="searchInput" placeholder="Buscar por nombre, DNI, email..." 
                           onkeyup="filtrarTabla()">
                    <button onclick="filtrarTabla()">
                        <i class="fas fa-search"></i> Buscar
                    </button>
                </div>
      <table id="solicitudes">
        <thead>
          <tr>
            <th>ID</th>
            <th>Cliente</th>
            <th>Tipo</th>
            <th>Estado</th>
            <th>Fecha</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
                        <tr th:if="${#lists.isEmpty(clientes)}">
                            <td colspan="8" class="no-data">
                                <i class="fas fa-user-slash" style="font-size: 48px; margin-bottom: 10px;"></i>
                                <p>No hay solicitudes registrados</p>
                            </td>
                        </tr>
        
          <tr th:each="solicitud : ${solicitudes}">
            <td th:text="${solicitud.id}">001</td>
            <td th:text="${solicitud.cliente.nombre}">Juan Pérez</td>
            <td th:text="${solicitud.tipo}">Financiamiento</td>
            <td th:text="${solicitud.estado}">Pendiente</td>
            <td th:text="${#dates.format(solicitud.fecha, 'dd/MM/yyyy')}">01/10/2025</td>
            <td>
              <button class="btn-success"><i class="fas fa-check"></i></button>
              <button class="btn-danger"><i class="fas fa-trash"></i></button>
              <div class="actions"> 
                <div class="actions">
                                    <a th:href="@{/gestion_solicitudes/editar/{id}(id=${solicitudes.id})}" 
                                       class="btn btn-edit">
                                        <i class="fas fa-edit"></i>
                                    </a>
                                    <a th:href="@{/gestion_solicitudes/eliminar/{id}(id=${solicitudes.id})}" 
                                       class="btn btn-delete"
                                       onclick="return confirm('¿Está seguro de eliminar este cliente?')">
                                        <i class="fas fa-trash"></i>
                                    </a>
                                </div>

            </td>
          </tr>
        </tbody>
      </table>
            </div>
        </div>
    </div>
        

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Archivo JS externo -->
    <script th:src="@{/javascript/gestion_solicitudes.js}"></script>
</body>
</html>  